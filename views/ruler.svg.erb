<svg xmlns="http://www.w3.org/2000/svg"
     xmlns:xlink="http://www.w3.org/1999/xlink">

  <% r = @render %>
  <defs>
    <linearGradient id="qualityGradient"
                    x1="0%" y1="0%"
                    x2="100%" y2="0%"
                    spreadMethod="pad">
      <stop offset="<%= 100 * r.padding / r.ruler_width %>%"
         stop-color="#cc0000" stop-opacity="1" /><!-- worse offset: 46ppc/120ppi -->
      <stop offset="<%= 100 * (r.padding + r.resolutions[1] - r.resolutions.first) / r.ruler_width %>%"
         stop-color="#f8f800" stop-opacity="1" /><!-- bad offset: 64ppc/170ppi -->
      <stop offset="<%= 100 * (r.padding + r.resolutions[2] - r.resolutions.first) / r.ruler_width %>%"
         stop-color="#f8f800" stop-opacity="1" /><!-- good offset: 96ppc/240ppi -->
      <stop offset="<%= 100 * (r.padding + r.resolutions[3] - r.resolutions.first) / r.ruler_width %>%"
         stop-color="#88f800" stop-opacity="1" /><!-- better offset: 120ppc/300ppi -->
      <stop offset="<%= 100 * (r.padding + r.resolutions[4] - r.resolutions.first) / r.ruler_width %>%"
         stop-color="#00cc00" stop-opacity="1" /><!-- best offset: 160ppc/400ppi -->
    </linearGradient>
  </defs>

  <rect rx="0" ry="0"
     x="<%= r.ruler_x %>"
     y="<%= r.ruler_y %>"
     width="<%= r.ruler_width %>"
     height="<%= r.ruler_height %>"
     style="fill:url(#qualityGradient); stroke-width: 0;" />
  
  <% largest_good_x = @largest_good.value.round - r.resolutions.first + r.padding %>
  <line x1="<%= largest_good_x %>" y1="<%= r.ruler_y - 8 %>" x2="<%= largest_good_x %>"
     y2="<%= r.ruler_y + r.ruler_height %>"
     style="stroke: #000000; stroke-width: 2;" />
  <text x="<%= largest_good_x + 2 %>" y="<%= r.ruler_y - 4 %>"
     style="stroke: #000000"><%= @largest_good.size %></text>

  <% largest_great_x = @largest_great.value.round - r.resolutions.first + r.padding %>
  <line x1="<%= largest_great_x %>" y1="<%= r.ruler_y %>" x2="<%= largest_great_x %>"
     y2="<%= r.ruler_y + r.ruler_height + 8 %>"
     style="stroke: #000000; stroke-width: 2;" />
  <text x="<%= largest_great_x + 2 %>" y="<%= r.ruler_y + r.ruler_height + 16 %>"
     style="stroke: #000000"><%= @largest_great.size %></text>

</svg>
